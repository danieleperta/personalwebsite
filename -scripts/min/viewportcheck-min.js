!function($){$.fn.viewportChecker=function(e){var o={classToAdd:"visible",classToRemove:"invisible",classToAddForFullView:"full-visible",removeClassAfterAnimation:!1,offset:100,repeat:!0,invertBottomOffset:!0,callbackFunction:function(e,o){},scrollHorizontal:!1,scrollBox:window};$.extend(o,e);var t=this,a={height:$(o.scrollBox).height(),width:$(o.scrollBox).width()},s=navigator.userAgent.toLowerCase().indexOf("webkit")!=-1||navigator.userAgent.toLowerCase().indexOf("windows phone")!=-1?"body":"html";return this.checkElements=function(){var e,l;o.scrollHorizontal?(e=$(s).scrollLeft(),l=e+a.width):(e=$(s).scrollTop(),l=e+a.height),t.each(function(){var t=$(this),s={},i={};if(t.data("vp-add-class")&&(i.classToAdd=t.data("vp-add-class")),t.data("vp-remove-class")&&(i.classToRemove=t.data("vp-remove-class")),t.data("vp-add-class-full-view")&&(i.classToAddForFullView=t.data("vp-add-class-full-view")),t.data("vp-keep-add-class")&&(i.removeClassAfterAnimation=t.data("vp-remove-after-animation")),t.data("vp-offset")&&(i.offset=t.data("vp-offset")),t.data("vp-repeat")&&(i.repeat=t.data("vp-repeat")),t.data("vp-scrollHorizontal")&&(i.scrollHorizontal=t.data("vp-scrollHorizontal")),t.data("vp-invertBottomOffset")&&(i.scrollHorizontal=t.data("vp-invertBottomOffset")),$.extend(s,o),$.extend(s,i),!t.data("vp-animated")||s.repeat){String(s.offset).indexOf("%")>0&&(s.offset=parseInt(s.offset)/100*a.height);var n=s.scrollHorizontal?t.offset().left:t.offset().top,d=s.scrollHorizontal?n+t.width():n+t.height(),r=Math.round(n)+s.offset,c=s.scrollHorizontal?r+t.width():r+t.height();s.invertBottomOffset&&(c-=2*s.offset),r<l&&c>e?(t.removeClass(s.classToRemove),t.addClass(s.classToAdd),s.callbackFunction(t,"add"),d<=l&&n>=e?t.addClass(s.classToAddForFullView):t.removeClass(s.classToAddForFullView),t.data("vp-animated",!0),s.removeClassAfterAnimation&&t.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){t.removeClass(s.classToAdd)})):t.hasClass(s.classToAdd)&&s.repeat&&(t.removeClass(s.classToAdd+" "+s.classToAddForFullView),s.callbackFunction(t,"remove"),t.data("vp-animated",!1))}})},("ontouchstart"in window||"onmsgesturechange"in window)&&$(document).bind("touchmove MSPointerMove pointermove",this.checkElements),$(o.scrollBox).bind("load scroll",this.checkElements),$(window).resize(function(e){a={height:$(o.scrollBox).height(),width:$(o.scrollBox).width()},t.checkElements()}),this.checkElements(),this}}(jQuery);